{
    "sourceFile": "src/app/lote-detail/lote-detail.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1765694305922,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1765694305922,
            "name": "Commit-0",
            "content": "<div class=\"container mt-5\">\n\n    <div *ngIf=\"isLoading\" class=\"text-center\">\n        <div class=\"spinner-border text-primary\" role=\"status\">\n            <span class=\"sr-only\">Cargando...</span>\n        </div>\n    </div>\n\n    <div *ngIf=\"!isLoading && lote\" class=\"card shadow-lg\">\n        <div class=\"row no-gutters\">\n            <div class=\"col-md-6\">\n                <!-- Gallery Section -->\n                <small class=\"text-muted\">Imágenes: {{ lote.galeriaImagenes?.length || 0 }}</small>\n                <div *ngIf=\"lote.galeriaImagenes && lote.galeriaImagenes.length > 0; else singleImage\">\n                    <div class=\"row\">\n                        <div class=\"col-6 col-md-4 mb-3\" *ngFor=\"let img of lote.galeriaImagenes; let i = index\">\n                            <img [src]=\"img\" class=\"img-thumbnail\"\n                                style=\"cursor: pointer; object-fit: cover; height: 150px; width: 100%;\"\n                                (click)=\"openGallery(i)\" alt=\"Thumbnail {{i}}\">\n                        </div>\n                    </div>\n                </div>\n                <!-- Fallback to single imageUrl if gallery is empty -->\n                <ng-template #singleImage>\n                    <img [src]=\"lote.imagenUrl || '/assets/images/placeholder.jpg'\" class=\"card-img h-100\"\n                        (click)=\"openGallery(0)\" alt=\"Imagen del Lote\"\n                        style=\"object-fit: cover; min-height: 400px; cursor: pointer;\">\n                </ng-template>\n            </div>\n            <div class=\"col-md-6\">\n                <div class=\"card-body\">\n                    <small class=\"text-uppercase text-muted font-weight-bold\" *ngIf=\"lote.fraccionamiento\">\n                        {{ lote.fraccionamiento.nombre }} <span class=\"mx-2\">|</span> <i\n                            class=\"fas fa-map-marker-alt\"></i> {{ lote.fraccionamiento.ubicacion }}\n                    </small>\n                    <h2 class=\"card-title text-primary mt-1\">Lote {{ lote.numeroLote }}</h2>\n                    <h5 class=\"text-muted\">{{ lote.manzana }}</h5>\n                    <span class=\"badge\"\n                        [ngClass]=\"{'badge-success': lote.estatus === 'DISPONIBLE', 'badge-danger': lote.estatus === 'VENDIDO', 'badge-warning': lote.estatus === 'APARTADO'}\">\n                        {{ lote.estatus }}\n                    </span>\n\n                    <hr>\n\n                    <div class=\"row mt-4\">\n                        <div class=\"col-6\">\n                            <p class=\"font-weight-bold\">Precio Total</p>\n                            <h4 class=\"text-success\">{{ lote.precioTotal | currency:'MXN' }}</h4>\n                        </div>\n                        <div class=\"col-6\">\n                            <p class=\"font-weight-bold\">Área</p>\n                            <h4>{{ lote.areaMetrosCuadrados }} m²</h4>\n                        </div>\n                    </div>\n\n                    <div class=\"mt-4\">\n                        <p><strong>Descripción:</strong></p>\n                        <p>{{ lote.descripcion || 'Sin descripción disponible para este lote.' }}</p>\n                    </div>\n\n                    <div class=\"mt-5 d-flex justify-content-between\">\n                        <button (click)=\"goBack()\" class=\"btn btn-secondary\">\n                            <i class=\"fas fa-arrow-left\"></i> Volver\n                        </button>\n                        <button (click)=\"openQuoteModal()\" class=\"btn btn-primary\"\n                            *ngIf=\"lote.estatus === 'DISPONIBLE'\">\n                            <i class=\"fas fa-calculator\"></i> Cotizar Ahora\n                        </button>\n                        <button class=\"btn btn-disabled\" *ngIf=\"lote.estatus !== 'DISPONIBLE'\" disabled>\n                            No Disponible\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div *ngIf=\"errorMessage\" class=\"alert alert-danger mt-3\">\n        {{ errorMessage }}\n        <button (click)=\"goBack()\" class=\"btn btn-sm btn-outline-danger ml-2\">Volver</button>\n    </div>\n\n    <!-- Custom Modal Overlay -->\n    <div class=\"modal-backdrop fade show\" *ngIf=\"showModal\"></div>\n    <div class=\"modal fade show\" tabindex=\"-1\" role=\"dialog\" [style.display]=\"showModal ? 'block' : 'none'\"\n        *ngIf=\"showModal\">\n        <div class=\"modal-dialog\" role=\"document\">\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\">Cotizar Lote</h5>\n                    <button type=\"button\" class=\"close\" (click)=\"closeQuoteModal()\">\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                </div>\n                <div class=\"modal-body\">\n                    <div *ngIf=\"quoteSuccess\" class=\"alert alert-success\">\n                        {{ quoteSuccess }}\n                    </div>\n                    <div *ngIf=\"quoteError\" class=\"alert alert-danger\">\n                        {{ quoteError }}\n                    </div>\n\n                    <form *ngIf=\"!quoteSuccess\">\n                        <div class=\"form-group\">\n                            <label>Nombre Completo</label>\n                            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"quoteData.nombre\" name=\"nombre\"\n                                required>\n                        </div>\n                        <div class=\"form-group\">\n                            <label>Email</label>\n                            <input type=\"email\" class=\"form-control\" [(ngModel)]=\"quoteData.email\" name=\"email\"\n                                required>\n                        </div>\n                        <div class=\"form-group\">\n                            <label>Teléfono</label>\n                            <input type=\"tel\" class=\"form-control\" [(ngModel)]=\"quoteData.telefono\" name=\"telefono\"\n                                required>\n                        </div>\n                        <div class=\"form-group\">\n                            <label>Mensaje</label>\n                            <textarea class=\"form-control\" rows=\"3\" [(ngModel)]=\"quoteData.mensaje\"\n                                name=\"mensaje\"></textarea>\n                        </div>\n                    </form>\n                </div>\n                <div class=\"modal-footer\">\n                    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"closeQuoteModal()\">Cerrar</button>\n                    <button type=\"button\" class=\"btn btn-primary\" (click)=\"submitQuote()\" *ngIf=\"!quoteSuccess\">Enviar\n                        Solicitud</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n<!-- Gallery Modal -->\n<div class=\"modal-backdrop fade show\" *ngIf=\"showGalleryModal\"></div>\n<div class=\"modal show\" tabindex=\"-1\" role=\"dialog\" [style.display]=\"showGalleryModal ? 'block' : 'none'\"\n    *ngIf=\"showGalleryModal\">\n    <div class=\"modal-dialog modal-lg modal-dialog-centered\" role=\"document\">\n        <div class=\"modal-content bg-dark border-0\">\n            <div class=\"modal-header border-0\">\n                <button type=\"button\" class=\"close text-white\" (click)=\"closeGalleryModal()\">\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body text-center p-0 position-relative\">\n                <img [src]=\"lote.galeriaImagenes[selectedImageIndex]\" class=\"img-fluid\" style=\"max-height: 80vh;\">\n\n                <a class=\"carousel-control-prev\" href=\"javascript:void(0)\" role=\"button\" (click)=\"prevImage()\"\n                    *ngIf=\"lote.galeriaImagenes.length > 1\">\n                    <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n                    <span class=\"sr-only\">Previous</span>\n                </a>\n                <a class=\"carousel-control-next\" href=\"javascript:void(0)\" role=\"button\" (click)=\"nextImage()\"\n                    *ngIf=\"lote.galeriaImagenes.length > 1\">\n                    <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n                    <span class=\"sr-only\">Next</span>\n                </a>\n            </div>\n            <div class=\"modal-footer border-0 justify-content-center text-white\">\n                {{ selectedImageIndex + 1 }} / {{ lote.galeriaImagenes.length }}\n            </div>\n        </div>\n    </div>\n</div>\n"
        }
    ]
}